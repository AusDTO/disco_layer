(function(){"use strict";function a(a,c,d){function e(a){a.preventDefault()}function f(){h&&h.parentNode&&(h.parentNode.removeChild(h),h=null)}function g(){clearTimeout(i),i=!1,f()}var h,i,j=this,k=sigma.utils.extend(d.stage,b.stage),l=sigma.utils.extend(d.node,b.node),m=sigma.utils.extend(d.edge,b.edge),n=!1;if(sigma.classes.dispatcher.extend(this),a.bind("kill",function(){sigma.plugins.killTooltips(a)}),this.open=function(b,d,e,g){if(f(),h=document.createElement("div"),d.renderer){var i,j,k,l=Object.create(null);for(k in b)l[k]=b[k];if(i=d.renderer.call(a.graph,l,d.template),j=typeof i,"undefined"===j)return;"string"===j?h.innerHTML=i:h.appendChild(i)}else h.innerHTML=d.template;var m=c.container.getBoundingClientRect();e=~~(e-m.left),g=~~(g-m.top),h.className=d.cssClass,"css"!==d.position&&(h.style.position="relative",h.style.left=e+"px",h.style.top=g+"px"),setTimeout(function(){if(h){c.container.appendChild(h);var a=document.body.getBoundingClientRect(),b=h.getBoundingClientRect(),f=b.top-a.top,i=a.bottom-b.bottom,j=b.left-a.left,k=a.right-b.right;"top"===d.position?(h.className=d.cssClass+" top",h.style.left=e-b.width/2+"px",h.style.top=g-b.height+"px"):"bottom"===d.position?(h.className=d.cssClass+" bottom",h.style.left=e-b.width/2+"px",h.style.top=g+"px"):"left"===d.position?(h.className=d.cssClass+" left",h.style.left=e-b.width+"px",h.style.top=g-b.height/2+"px"):"right"===d.position&&(h.className=d.cssClass+" right",h.style.left=e+"px",h.style.top=g-b.height/2+"px"),d.autoadjust&&(b=h.getBoundingClientRect(),f=b.top-a.top,i=a.bottom-b.bottom,j=b.left-a.left,k=a.right-b.right,0>i?(h.className=d.cssClass,("top"===d.position||"bottom"===d.position)&&(h.className=d.cssClass+" top"),h.style.top=g-b.height+"px"):0>f&&(h.className=d.cssClass,("top"===d.position||"bottom"===d.position)&&(h.className=d.cssClass+" bottom"),h.style.top=g+"px"),0>k?(h.className=d.cssClass,("left"===d.position||"right"===d.position)&&(h.className=d.cssClass+" left"),h.style.left=e-b.width+"px"):0>j&&(h.className=d.cssClass,("left"===d.position||"right"===d.position)&&(h.className=d.cssClass+" right"),h.style.left=e+"px"))}},0)},this.close=function(){return g(),this.dispatchEvent("hidden"),this},this.kill=function(){this.unbindEvents(),h=null,i=null,n=!1},this.unbindEvents=function(){d.stage&&(a.unbind(k.show),a.unbind(k.hide),"doubleClickStage"!==k.show&&a.unbind("doubleClickStage")),d.node&&(a.unbind(l.show),a.unbind(l.hide),"doubleClickNode"!==l.show&&a.unbind("doubleClickNode")),d.edge&&(a.unbind(m.show),a.unbind(m.hide),"doubleClickEdge"!==m.show&&a.unbind("doubleClickEdge")),("rightClickNode"===l.show||"rightClickEdge"===m.show)&&c.container.removeEventListener("contextmenu",e)},d.stage){if(void 0!==d.stage.renderer&&"function"!=typeof d.stage.renderer)throw new TypeError('"options.stage.renderer" is not a function, was '+d.stage.renderer);if(void 0!==d.stage.position&&"top"!==d.stage.position&&"bottom"!==d.stage.position&&"left"!==d.stage.position&&"right"!==d.stage.position&&"css"!==d.stage.position)throw new Error('"options.position" is not "top", "bottom", "left", "right", or "css", was '+d.position);a.bind(k.show,function(a){if("doubleClickStage"===k.show||!n){var b=a.data.captor.clientX,c=a.data.captor.clientY;clearTimeout(i),i=setTimeout(function(){j.open(null,k,b,c),j.dispatchEvent("shown",a.data)},k.delay)}}),a.bind(k.hide,function(a){var b=h;g(),b&&j.dispatchEvent("hidden",a.data)}),"doubleClickStage"!==k.show&&a.bind("doubleClickStage",function(a){g(),n=!0,j.dispatchEvent("hidden",a.data),setTimeout(function(){n=!1},b.doubleClickDelay)})}if(d.node){if(void 0!==d.node.renderer&&"function"!=typeof d.node.renderer)throw new TypeError('"options.node.renderer" is not a function, was '+d.node.renderer);if(void 0!==d.node.position&&"top"!==d.node.position&&"bottom"!==d.node.position&&"left"!==d.node.position&&"right"!==d.node.position&&"css"!==d.node.position)throw new Error('"options.position" is not "top", "bottom", "left", "right", or "css", was '+d.position);a.bind(l.show,function(a){if("doubleClickNode"===l.show||!n){var b=a.data.node||a.data.nodes[0],c=a.data.captor.clientX,d=a.data.captor.clientY;clearTimeout(i),i=setTimeout(function(){j.open(b,l,c,d),j.dispatchEvent("shown",a.data)},l.delay)}}),a.bind(l.hide,function(a){var b=h;g(),b&&j.dispatchEvent("hidden",a.data)}),"doubleClickNode"!==l.show&&a.bind("doubleClickNode",function(a){g(),n=!0,j.dispatchEvent("hidden",a.data),setTimeout(function(){n=!1},b.doubleClickDelay)})}if(d.edge){if(void 0!==d.edge.renderer&&"function"!=typeof d.edge.renderer)throw new TypeError('"options.edge.renderer" is not a function, was '+d.edge.renderer);if(void 0!==d.edge.position&&"top"!==d.edge.position&&"bottom"!==d.edge.position&&"left"!==d.edge.position&&"right"!==d.edge.position&&"css"!==d.edge.position)throw new Error('"options.position" is not "top", "bottom", "left", "right", or "css", was '+d.position);a.bind(m.show,function(a){if("doubleClickEdge"===m.show||!n){var b=a.data.edge||a.data.edges[0],c=a.data.captor.clientX,d=a.data.captor.clientY;clearTimeout(i),i=setTimeout(function(){j.open(b,m,c,d),j.dispatchEvent("shown",a.data)},m.delay)}}),a.bind(m.hide,function(a){var b=h;g(),b&&j.dispatchEvent("hidden",a.data)}),"doubleClickEdge"!==m.show&&a.bind("doubleClickEdge",function(a){g(),n=!0,j.dispatchEvent("hidden",a.data),setTimeout(function(){n=!1},b.doubleClickDelay)})}("rightClickNode"===l.show||"rightClickEdge"===m.show)&&c.container.addEventListener("contextmenu",e)}if("undefined"==typeof sigma)throw new Error("sigma is not declared");sigma.utils.pkg("sigma.plugins");var b={stage:{show:"rightClickStage",hide:"clickStage",cssClass:"sigma-tooltip",position:"",autoadjust:!1,delay:0,template:"",renderer:null},node:{show:"clickNode",hide:"clickStage",cssClass:"sigma-tooltip",position:"",autoadjust:!1,delay:0,template:"",renderer:null},edge:{show:"clickEdge",hide:"clickStage",cssClass:"sigma-tooltip",position:"",autoadjust:!1,delay:0,template:"",renderer:null},doubleClickDelay:800},c={};sigma.plugins.tooltips=function(b,d,e){return c[b.id]||(c[b.id]=new a(b,d,e)),c[b.id]},sigma.plugins.killTooltips=function(b){c[b.id]instanceof a&&c[b.id].kill(),delete c[b.id]}}).call(window);
//# sourceMappingURL=sigma.plugins.tooltips.min.js.map