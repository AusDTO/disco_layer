(function(){"use strict";function a(a,c,d){function e(b){var c=Math.max(a.settings("zoomMin"),Math.min(a.settings("zoomMax"),a.camera.ratio*(b.ratio||1)));sigma.misc.animation.camera(a.camera,{x:a.camera.x+(b.x||0),y:a.camera.y+(b.y||0),ratio:c},{duration:b.duration})}function f(){e({x:-d.displacement,duration:d.duration})}function g(){e({y:-d.displacement,duration:d.duration})}function h(){e({x:d.displacement,duration:d.duration})}function i(){e({y:d.displacement,duration:d.duration})}function j(){e({ratio:1/d.zoomingRatio,duration:d.duration})}function k(){e({ratio:d.zoomingRatio,duration:d.duration})}d=sigma.utils.extend(d,b),d.zoomingRatio=d.zoomingRatio||a.settings("zoomingRatio"),d.duration=d.duration||a.settings("mouseZoomDuration"),this.domElt=c.container,this.keys={},this.currentEvents=null;var l=this;sigma.classes.dispatcher.extend(this),this.keyDown=function(a){9===a.which||18===a.which||20===a.which||l.keys[a.which]||(l.keys[a.which]=!0,l.currentEvents=Object.keys(l.keys).join("+"),l.dispatchEvent(l.currentEvents))},this.keyUp=function(a){delete l.keys[a.which],l.currentEvents=null},this.focus=function(){return l.domElt.focus(),!0},this.blur=function(){return l.domElt.blur(),l.keys={},l.currentEvents=null,!0},this.domElt.tabIndex=d.tabIndex,d.autofocus&&(this.domElt.focus(),this.domElt.addEventListener("mouseover",this.focus,!1),this.domElt.addEventListener("mouseout",this.blur,!1)),this.domElt.addEventListener("keydown",this.keyDown,!1),this.domElt.addEventListener("keyup",this.keyUp,!1),this.bind("37 18+37",f),this.bind("38 18+38",g),this.bind("39 18+39",h),this.bind("40 18+40",i),this.bind("32+38 18+32+38",j),this.bind("32+40 18+32+40",k)}if("undefined"==typeof sigma)throw"sigma.plugins.keyboard: sigma is not declared";sigma.utils.pkg("sigma.plugins");var b={displacement:100,duration:200,zoomingRatio:1.7,autofocus:!0,tabIndex:-1},c={};sigma.plugins.keyboard=function(b,d,e){return c[b.id]||(c[b.id]=new a(b,d,e),b.bind("kill",function(){sigma.plugins.killKeyboard(b)})),c[b.id]},sigma.plugins.killKeyboard=function(b){c[b.id]instanceof a&&(c[b.id].unbind(),c[b.id].domElt.removeEventListener("mouseover",c[b.id].focus,!1),c[b.id].domElt.removeEventListener("mouseout",c[b.id].blur,!1),c[b.id].domElt.removeEventListener("keydown",c[b.id].keyDown,!1),c[b.id].domElt.removeEventListener("keyup",c[b.id].keyUp,!1),c[b.id].domElt=null,c[b.id].keys={},c[b.id].currentEvents=null,delete c[b.id])}}).call(this);
//# sourceMappingURL=sigma.plugins.keyboard.min.js.map